!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Honeybadger=t()}(this,function(){"use strict";function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e=function(){var b,w,j="1.0.4",k={name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:j,language:"javascript"},E=!1,x=!1;function _(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function S(e,t){var n=_(e,t);return e.context&&t.context&&(n.context=_(e.context,t.context)),n}function T(e){return!!b&&b.name===e.name&&b.message===e.message&&b.stack===e.stack}function O(e){return e.stacktrace||e.stack||void 0}return function(e){var o=x,t=[],u=[],f={context:{},beforeNotifyHandlers:[],errorsSent:0};if("object"===R(e))for(var n in e)f[n]=e[n];function c(){var e=window.console;if(e){var t=Array.prototype.slice.call(arguments);t.unshift("[Honeybadger]"),e.log.apply(e,t)}}function l(){if(p("debug"))return c.apply(this,arguments)}function p(e,t){var n=f[e];return void 0===n&&(n=f[e.toLowerCase()]),"false"===n&&(n=!1),void 0!==n?n:t}function s(){return!o&&p("onerror",!0)}function r(e,t){try{var n=new XMLHttpRequest;n.open("POST","http"+(p("ssl",!0)?"s":"")+"://"+p("host","api.honeybadger.io")+"/v1/notices/js",p("async",!0)),n.setRequestHeader("X-API-Key",e),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","text/json, application/json"),n.send(JSON.stringify(function e(t,n){var r,o,i,a;if(i={},n||(n=0),n>=p("max_depth",8))return"[MAX DEPTH REACHED]";for(r in t)o=t[r],Object.prototype.hasOwnProperty.call(t,r)&&null!=r&&null!=o&&((/function|symbol/.test(R(a=o))||"object"===R(a)&&void 0===a.hasOwnProperty)&&(o=Object.prototype.toString.call(o)),i[r]="object"===R(o)?e(o,n+1):o);return i}(t)))}catch(e){c("Unable to send error report: error while initializing request",e,t)}}function d(e){if(b=w=null,p("disabled",!1))return l("Dropping notice: honeybadger.js is disabled",e),!1;var t,n=p("apiKey",p("api_key"));return n?(t=p("maxErrors"))&&f.errorsSent>=t?(l("Dropping notice: max errors exceeded",e),!1):(f.errorsSent++,r(n,e),!0):(c("Unable to send error report: no API key has been configured"),!1)}function v(e,t){if(e||(e={}),"[object Error]"===Object.prototype.toString.call(e)){var n=e;e=_(e,{name:n.name,message:n.message,stack:O(n)})}if("object"!==R(e)){var r=String(e);e={message:r}}if(T(e))return!1;if(w&&E&&d(w),function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(e))return!1;var o;t&&(e.stack=t.stack,o=t.generator);var i=(e=_(e,{name:e.name||"Error",context:_(f.context,e.context),url:e.url||document.URL,projectRoot:e.projectRoot||e.project_root||p("projectRoot",p("project_root",window.location.protocol+"//"+window.location.host)),environment:e.environment||p("environment"),component:e.component||p("component"),action:e.action||p("action"),revision:e.revision||p("revision")})).stack;if(function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(!1===(0,e[n])(t))return!0;return!1}(f.beforeNotifyHandlers,e))return!1;if(e.stack!=i&&(o=void 0),function(e,t){var n=e.message;for(var r in t)if(n.match(t[r]))return!0;return!1}(e,p("ignorePatterns")))return!1;var a,c=((a={}).HTTP_USER_AGENT=navigator.userAgent,document.referrer.match(/\S/)&&(a.HTTP_REFERER=document.referrer),a);"string"==typeof e.cookies?c.HTTP_COOKIE=e.cookies:"object"===R(e.cookies)&&(c.HTTP_COOKIE=function(e){if("object"===R(e)){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join(";")}}(e.cookies));var s={notifier:k,error:{class:e.name,message:e.message,backtrace:e.stack,generator:o,fingerprint:e.fingerprint},request:{url:e.url,component:e.component,action:e.action,context:e.context,cgi_data:c,params:e.params},server:{project_root:e.projectRoot,environment_name:e.environment,revision:e.revision}};return w=s,b=e,E?(l("Deferring notice",e,s),window.setTimeout(function(){T(e)&&d(s)})):(l("Queuing notice",e,s),u.push(s)),e}var i=!0;if(window.atob||(i=!1),window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(i=!1)}catch(e){}function a(t,n){try{return"function"!=typeof t?t:(e=t,"function"!=typeof Object.isExtensible||Object.isExtensible(e)?(t.___hb||(t.___hb=function(){var e=s();if(!(i&&(e||n)||n&&!e))return t.apply(this,arguments);try{return t.apply(this,arguments)}catch(e){throw v(e),e}}),t.___hb.___hb=t.___hb,t.___hb):t)}catch(e){return t}var e}f.notify=function(e,t,n){if(e||(e={}),"[object Error]"===Object.prototype.toString.call(e)){var r=e;e=_(e,{name:r.name,message:r.message,stack:O(r)})}return"object"!==R(e)&&(e={message:String(e)}),t&&"object"!==R(t)&&(t={name:String(t)}),t&&(e=S(e,t)),"object"===R(n)&&(e=S(e,n)),v(e,function(e){var t;if(e&&(t=O(e)))return{stack:t,generator:void 0};try{throw new Error("")}catch(e){if(t=O(e))return{stack:t,generator:"throw"}}t=["<call-stack>"];for(var n=arguments.callee;n&&t.length<10;){/function(?:\s+([\w$]+))+\s*\(/.test(n.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{n=n.caller}catch(e){break}}return{stack:t.join("\n"),generator:"walk"}}(e))},f.wrap=function(e){return a(e,!0)},f.setContext=function(e){return"object"===R(e)&&(f.context=_(f.context,e)),f},f.resetContext=function(e){return"object"===R(e)?f.context=_({},e):f.context={},f},f.configure=function(e){for(var t in e)f[t]=e[t];return f},f.beforeNotify=function(e){return f.beforeNotifyHandlers.push(e),f};var y=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};function g(e,t,n){if(!o&&e&&t&&n){var r=e[t];e[t]=n(r)}}f.reset=function(){for(var e in f.context={},f.beforeNotifyHandlers=[],f)-1==y.call(t,e)&&(f[e]=void 0);return f.resetMaxErrors(),f},f.resetMaxErrors=function(){return f.errorsSent=0},f.getVersion=function(){return j};var m=function(r){return function(e,t){if("function"!=typeof e)return r(e,t);var n=Array.prototype.slice.call(arguments,2);return e=a(e),r(function(){e.apply(null,n)},t)}};for(var n in g(window,"setTimeout",m),g(window,"setInterval",m),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){var t=window[e]&&window[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(g(t,"addEventListener",function(o){return function(e,t,n,r){try{t&&null!=t.handleEvent&&(t.handleEvent=a(t.handleEvent))}catch(e){c(e)}return o.call(this,e,a(t),n,r)}}),g(t,"removeEventListener",function(o){return function(e,t,n,r){return o.call(this,e,t,n,r),o.call(this,e,a(t),n,r)}}))}),g(window,"onerror",function(i){return function(e,t,n,r,o){return function(e,t,n,r,o){if(l("window.onerror callback invoked",arguments),!b&&s())if(0===n&&/Script error\.?/.test(e))c("Ignoring cross-domain script error: enable CORS to track these types of errors",arguments);else{var i=[e,"\n    at ? (",t||"unknown",":",n||0,":",r||0,")"].join("");if(o){var a={stack:O(o)};return a.stack||(a={stack:i}),v(o,a)}v({name:"window.onerror",message:e,stack:i})}}(e,t,n,r,o),!("function"!=typeof i||!p("_onerror_call_orig",!0))&&i.apply(this,arguments)}}),x=!0,f)t.push(n);if(l("Initializing honeybadger.js "+j),/complete|interactive|loaded/.test(document.readyState))E=!0,l("honeybadger.js 1.0.4 ready");else{l("Installing ready handler");var h=function(){var e;for(E=!0,l("honeybadger.js 1.0.4 ready");e=u.pop();)d(e)};document.addEventListener?document.addEventListener("DOMContentLoaded",h,!0):window.attachEvent("onload",h)}return f}}(),t=e();return t.factory=e,t});
//# sourceMappingURL=honeybadger.min.js.map
